# 🚛 基于 HD-VNS 的大规模 CVRP 求解器（Golden 数据集）

本项目为华南理工大学**智能算法及应用**课程期末实验，实现了一种用于求解大规模容量约束车辆路径问题（CVRP）的启发式算法，采用 **HD-VNS（Hierarchical Decomposition + Variable Neighborhood Search）** 框架，支持对 Golden 数据集（240~420 客户）的高效求解。

> 📘 适用于课程设计、科研项目、优化竞赛或物流调度系统原型。

---

## ✅ 项目特点

- 模块化 Python 实现，结构清晰
- 面向大规模 CVRP 问题，支持容量约束
- 结合三大核心模块：
  - 路径切割（RCO）
  - 路径聚类重构（HD）
  - 多邻域搜索优化（VNS）
- 每个实例运行 20 次，统计最优/最差/均值/误差
- 支持与 Golden 数据集的最优解 `.sol` 文件对比

---

## 📁 文件结构

```

.
├── data/               # 存放 Golden\_1.vrp \~ Golden\_20.vrp
├── sol/                # 存放最优解 Golden\_1.sol \~ Golden\_20.sol
├── cvrp_parser.py      # 解析 .vrp 文件
├── initial_solution.py # 初始路径构造（每个客户一条路径）
├── route_merge.py      # 路径合并模块（贪婪近邻）
├── rco_split.py        # 路径切割模块（RCO）
├── hd_cluster.py       # 路径聚类与重构模块（KMeans）
├── vns_search.py       # 多邻域搜索模块（路径内 + 路径间）
├── batch_solver.py     # 主批量运行程序
├── results_summary.csv # 实验汇总结果
└── README.md           # 项目说明文件（本文件）

````

---

## 🚦 算法流程概览

```text
初始化路径（每客户单独一条）
        ↓
贪婪合并 → 构造可切割路径
        ↓
路径切割（RCO）
        ↓
路径聚类 + 重构（HD）
        ↓
多邻域搜索优化（VNS）
        ↓
重复运行并记录最优解
````

---

## 📊 实验指标（每个实例 运行 20 次）

| 指标        | 含义说明                |
| --------- | ------------------- |
| BestCost  | 20 次运行中总代价最低值       |
| AvgCost   | 所有运行结果的平均总代价        |
| AvgGap(%) | 与官方最优解相比的相对误差       |
| StdDev    | 总代价的标准差（衡量稳定性）      |
| BestRoute | 最佳路径的客户访问顺序（文本格式输出） |

---

## 🚀 快速使用说明

```bash
# 推荐使用 Python 3.8+
pip install -r requirements.txt

# 确保 data/ 和 sol/ 文件夹中有完整的 .vrp / .sol 文件

# 执行主程序（串行运行全部 20 个实例，每个 20 次）
python batch_solver.py
```

运行完成后，将生成：

```
results_summary.csv  # 包含每个实例的完整统计结果
```

---

## 📈 示例结果（部分）

| 实例         | 最优总代价    | 平均总代价    | 相对误差 Gap | 稳定性（标准差） |
| ---------- | -------- | -------- | -------- | -------- |
| Golden\_1  | 5738.92  | 6009.47  | 6.86%    | 163.41   |
| Golden\_4  | 14855.51 | 15409.79 | 13.40%   | 324.84   |
| Golden\_10 | 823.84   | 849.69   | 15.53%   | 18.82    |

> 📌 完整结果见：`results_summary.csv`

---

## 🔧 可扩展功能（推荐）

* [ ] 增加路径可视化（matplotlib）
* [ ] 支持并行加速运行（multiprocessing）
* [ ] 接入 Tabu Search / SA 等高级算子
* [ ] 扩展支持 VRPTW（带时间窗的 VRP）

---

## 📚 参考资料

本项目方法参考自以下文献：

>饶舜,张玉州.**一种求解大规模CVRP的有效算法**[J].安庆师范大学学报(自然科学版),2022,28(01):43-48.DOI:10.13757/j.cnki.cn34-1328/n.2022.01.013.

---

## 📜 License

本项目使用 MIT 开源许可证，可自由用于学习、研究与教学目的。



